{
  "name": "html2json",
  "version": "0.0.1",
  "title": "html2json",
  "description": "A simple app that converts HTML to JSON and back. This is effective for utilization of a virtual dom like an app such as a website builder.",
  "author": "Michael Schwartz",
  "url": "https://michaelsboost.com/html2json",
  "meta": "",
  "libraries": [
    "https://cdnjs.cloudflare.com/ajax/libs/picocss/2.0.6/pico.min.css",
    "https://michaelsboost.com/TailwindCSSMod/tailwind-mod-noreset.min.js",
    "https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"
  ],
  "html_pre_processor": "html",
  "css_pre_processor": "css",
  "javascript_pre_processor": "javascript",
  "html": "<header class=\"absolute inset-0 text-center grid grid-cols-1 items-center\">\n  <hgroup>\n    <h1 class=\"mb-2 text-[#ffffff00]\">html2json</h1>\n    <h2 class=\"text-[#ffffff00]\">A simple app that converts HTML to JSON and back. This is effective for utilization of a virtual dom like an app such as a website builder.</h2>\n  </hgroup>\n</header>\n\n<!-- flexbox for panels and preview -->\n<div class=\"flex flex-col flex-col-reverse sm:flex-row absolute inset-0 bottom-0 overflow-hidden\">\n  <div \n    class=\"flex-[2] sm:flex-[1] relative w-full sm:w-96 h-full border-0 border-t sm:border-0 sm:border-r border-solid border-gray-800\" \n    data-theme=\"border\"\n  >\n    <div class=\"relative h-full\" data-panel=\"code\">\n      <textarea \n        id=\"input\" \n        class=\"w-full h-full resize-none rounded-none m-0 text-sm bg-transparent border-0\"\n        style=\"color: unset;\"\n        placeholder=\"HTML code here...\"\n      ></textarea>\n      <button\n        aria-label=\"export html\"\n        name=\"export html\"\n        class=\"absolute bottom-0 right-0 w-10 h-10 p-1 m-4 rounded-full bg-pink-500 focus:shadow-none border-0\"\n        onclick=\"download('html')\"\n      >\n        <svg class=\"h-full transform scale-50\" viewBox=\"0 0 384 512\">\n          <path \n            fill=\"currentColor\"\n            d=\"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z\" />\n        </svg>\n      </button>\n    </div>\n    <div class=\"h-full hidden\" data-panel=\"settings\"></div>\n  </div>\n  \n  <div class=\"flex-[2] w-full overflow-hidden flex\">\n    <div class=\"relative w-full h-full border-0 overflow-auto p-4\">\n      <nav class=\"absolute inset-0 flex flex-col\">\n        <div class=\"flex-[0] border-0 border-b border-solid border-gray-800 py-2\" data-theme=\"border\" data-menubar></div>\n        <div class=\"flex-[2] overflow-hidden\">\n          <div class=\"relative grid grid-cols-1 align-center items-center w-full h-full\">\n            <textarea \n              id=\"output\" \n              class=\"w-full h-full resize-none rounded-none m-0 text-sm bg-transparent border-0\" \n              data-theme=\"border\"\n              style=\"color: unset;\"\n              placeholder=\"JSON code here...\"\n            >[]</textarea>\n            <button\n              aria-label=\"export json\"\n              name=\"export json\"\n              class=\"absolute bottom-0 right-0 w-10 h-10 p-1 m-4 rounded-full bg-purple-500 focus:shadow-none\"\n              onclick=\"download('json')\"\n            >\n              <svg class=\"h-full transform scale-50\" viewBox=\"0 0 384 512\">\n                <path \n                  fill=\"currentColor\"\n                  d=\"M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </nav>\n    </div>\n  </div>\n</div>",
  "css": "",
  "javascript": "// keep project and data in the global scope\nlet project = {\n  statekeys: false,\n  states: {},\n  html: `<main class=\"container\">\n  <button class=\"bg-transparent border-0 px-3 py-2 m-0\" onclick=\"alert('hello world')\">\n    <span>hello world</span>\n  </button>\n</main>`,\n  json: `[\n  {\n    \"tag\": \"main\",\n    \"props\": {\n      \"class\": \"container\"\n    },\n    \"children\": [\n      {\n        \"tag\": \"button\",\n        \"props\": {\n          \"class\": \"bg-transparent border-0 px-3 py-2 m-0\"\n        },\n        \"events\": {\n          \"onclick\": \"alert('hello world')\"\n        },\n        \"children\": [\n          {\n            \"tag\": \"span\",\n            \"children\": [],\n            \"text\": \"hello world\"\n          }\n        ]\n      }\n    ]\n  }\n]`,\n  dark: true\n};\nconst data = {\n  themeIcon: \"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z\",\n  activePanel: null\n};\nconst MenuBar = {\n  render(container) {\n    const buttonClass = 'border-0 bg-transparent text-sm focus:shadow-none';\n    const svgClass = 'h-3 -mt-1';\n    const svgClassTransform = `${svgClass} transform origin-center scale-125`;\n    const selectClass = 'm-0 w-auto rounded-md text-[.6rem]';\n    const selectStyle = 'padding: 0.5rem 2rem 0.5rem 0.5rem;';\n\n    const html = `<div class=\"flex justify-between items-center overflow-auto\">\n  <div class=\"flex justify-between items-center\">\n    <button\n      aria-label=\"new project\"\n      name=\"new project\"\n      class=\"${buttonClass}\"\n      onclick=\"newProject()\"\n      style=\"color: unset;\"\n    >\n      <svg class=\"${svgClassTransform}\" viewBox=\"0 0 384 512\">\n        <path \n          fill=\"currentColor\"\n          d=\"M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z\" />\n      </svg>\n    </button>\n    <button\n      aria-label=\"import project\"\n      name=\"import project\"\n      class=\"${buttonClass}\"\n      onclick=\"importProject()\"\n      style=\"color: unset;\"\n    >\n      <svg class=\"${svgClassTransform}\" viewBox=\"0 0 512 512\">\n        <path \n          fill=\"currentColor\"\n          d=\"M128 64c0-35.3 28.7-64 64-64H352V128c0 17.7 14.3 32 32 32H512V448c0 35.3-28.7 64-64 64H192c-35.3 0-64-28.7-64-64V336H302.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39H128V64zm0 224v48H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H128zM512 128H384V0L512 128z\" />\n      </svg>\n    </button>\n    <a\n      href=\"https://michaelsboost.com/donate/\"\n      aria-label=\"Donation helps developer maintence\"\n      target=\"_blank\"\n      role=\"button\"\n      class=\"w-full text-sm border-0 px-4 py-3 rounded-md bg-transparent text-red-400\"\n    >\n      <svg class=\"${svgClassTransform}\" viewBox=\"0 0 512 512\">\n        <path \n          fill=\"currentColor\"\n          d=\"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z\" />\n      </svg>\n    </a>\n  </div>\n  <div class=\"px-2 flex justify-between font-thin select-none cursor-default\">\n    html2json\n  </div>\n  <div class=\"flex justify-between items-center\">\n    <button\n      aria-label=\"export project\"\n      name=\"export project\"\n      class=\"${buttonClass}\"\n      onclick=\"download()\"\n      style=\"color: unset;\"\n    >\n      <svg class=\"${svgClassTransform}\" viewBox=\"0 0 512 512\">\n        <path \n          fill=\"currentColor\"\n          d=\"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z\" />\n      </svg>\n    </button>\n    <button\n      aria-label=\"toggle theme\"\n      name=\"toggle theme\"\n      class=\"${buttonClass}\"\n      style=\"color: unset;\"\n      onclick=\"theme()\"\n    >\n      <svg class=\"${svgClassTransform}\" viewBox=\"0 0 512 512\">\n        <path \n          id=\"themeIcon\"\n          fill=\"currentColor\"\n          d=\"${data.themeIcon}\"\n        />\n      </svg>\n    </button>\n    <button\n      id=\"settingsBtn\"\n      aria-label=\"toggle settings\"\n      name=\"toggle settings\"\n      class=\"${buttonClass}\"\n      style=\"color: unset;\"\n      onclick=\"togglePanel('settings', this)\"\n    >\n      <svg class=\"${svgClassTransform}\" viewBox=\"0 0 512 512\">\n        <path \n          fill=\"currentColor\" \n          d=\"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z\"/>\n      </svg>\n    </button>\n  </div>\n</div>`;\n          \n    const element = document.querySelector(container);\n    if (!element) return;\n    element.innerHTML = html;\n  }\n};\nconst Modal = {\n  render({\n    title = \"Are you sure you want to proceed?\",\n    content,\n    onLoad,\n    onConfirm\n  }) {\n    // if (!options) return false;\n    const hClass = \"text-lg font-thin\";\n    const buttonClass = \"text-xs w-auto px-3 py-2 m-0 capitalize rounded-md\";\n    const svgClass = \"w-3\";\n    const times = `<svg class=\"${svgClass}\" viewBox=\"0 0 384 512\">\n        <path \n          fill=\"currentColor\" \n          d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/>\n      </svg>`;\n\n    const html = `<article class=\"rounded-md\">\n      <header class=\"flex justify-between items-center\">\n        <h1 class=\"${hClass}\">${title}</h1>\n        <button class=\"${buttonClass} bg-transparent border-0\" style=\"color: unset;\" aria-label=\"Close\">\n          ${times}\n        </button>\n      </header>\n      <main class=\"font-thin\">\n        ${content ? content : ''}\n      </main>\n      <footer>\n        <button class=\"${buttonClass} bg-transparent border ${project.dark ? 'border-gray-600' : 'border-gray-200'}\" style=\"color: unset;\" aria-label=\"Close\" onclick=\"this.closest('dialog').close()\">close</button>\n        ${onConfirm ? `<button class=\"${buttonClass}\" aria-label=\"Confirm\">confirm</button>` : ''}\n      </footer>\n    </article>`;\n\n    const modal = document.createElement('dialog');\n    modal.open = true;\n    modal.innerHTML = html;\n\n    document.body.appendChild(modal);\n    if (onLoad && typeof onLoad === 'function') {\n      onLoad();\n    }\n\n    const closeBtn = modal.querySelector('footer button:first-child');\n    const confirmBtn = modal.querySelector('footer button:last-child');\n\n    // Confirm handler function\n    closeBtn.onclick = () => document.body.removeChild(modal);\n    confirmBtn.onclick = function() {\n      if (onConfirm && typeof onConfirm === 'function') {\n        onConfirm();\n      }\n      document.body.removeChild(modal);\n    }\n  }\n}\nconst Settings = {\n  render(container) {\n    const svgClass = 'h-3';\n    const inputClass = 'w-auto rounded-md text-[.6rem]';\n    const inputStyle = 'height: auto; margin: 0; padding: .4rem;';\n    const selectClass = 'm-0 w-auto rounded-md text-[.6rem]';\n    const selectStyle = 'padding: 0.5rem 2rem 0.5rem 0.5rem;';\n    const buttonClass = \"text-xs w-auto px-3 py-1 m-0 mx-1 capitalize rounded-md\";\n\n    const stateKeysHtml = Object.entries(project.states).map(([key, value]) => `\n      <div class=\"grid grid-cols-3 justify-between gap-2 items-center m-0 px-2 py-4 border-0 border-b border-solid border-gray-800\" data-theme=\"border\">\n        <span>${key}</span>\n        <div>\n          <input type=\"checkbox\" ${value ? 'checked' : ''} role=\"switch\" onchange=\"updateState('${key}', this.checked)\">\n        </div>\n        <button class=\"${buttonClass} bg-transparent text-red-600 border-red-600\" onclick=\"removeKey('${key}')\">Remove</button>\n      </div>\n    `).join('');\n\n    const html = `<div class=\"flex flex-col h-full justify-between font-thin\">\n  <div \n    class=\"flex-none px-3 pt-1 pb-2 border-0 border-b border-solid border-gray-800\" \n    data-theme=\"border\"\n  >\n    <div \n      class=\"flex justify-between items-center\"\n    >\n      <button class=\"${buttonClass} bg-transparent border-0 px-3 py-2\" style=\"color: unset;\" onclick=\"settingsBtn.onclick();\">\n        <svg class=\"${svgClass}\" viewBox=\"0 0 384 512\">\n          <path \n            fill=\"currentColor\" \n            d=\"M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 278.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z\"/>\n        </svg>\n      </button>\n      <div class=\"capitalize text-right\">\n        <span>state</span>\n        <label for=\"typesInJSON\" class=\"inline-block m-0 ml-2\">\n          <input id=\"typesInJSON\" type=\"checkbox\" ${project.statekeys ? 'checked' : ''} onchange=\"setState(this)\">\n        </label>\n      </div>\n    </div>\n  </div>\n  <div \n    class=\"flex-none px-3 py-2 border-0 border-b border-solid border-gray-800\" \n    data-theme=\"border\"\n  >\n    <div \n      class=\"grid grid-cols-3 justify-between gap-2\"\n    >\n      <span class=\"capitalize\">key</span>\n      <span class=\"capitalize\">value</span>\n      <span class=\"capitalize text-right\">actions</span>\n    </div>\n  </div>\n  <div \n    id=\"stateKeys\"\n    class=\"flex-[2]\">\n    ${stateKeysHtml}\n  </div>\n  <div \n    class=\"flex-none\">\n    <div \n      class=\"flex justify-between gap-2 p-2 pt-3 border-0 border-t border-solid border-gray-800\" \n      data-theme=\"border\">\n        <input type=\"text\" id=\"newKey\" class=\"${inputClass}\" style=\"${inputStyle}\" placeholder=\"Enter key\" onkeydown=\"handleEnterKey(event)\">\n        <select id=\"newValue\" class=\"${selectClass}\" style=\"${selectStyle}\">\n          <option value=\"true\">true</option>\n          <option value=\"false\">false</option>\n        </select>\n        <button id=\"addKeyBtn\" class=\"${buttonClass}\" onclick=\"addKey()\">Add</button>\n      </div>\n    </div>\n  </div>\n</div>`;\n\n    const element = document.querySelector(container);\n    if (!element) return;\n    element.innerHTML = html;\n  }\n};\n\n// Function that sets initial optional keys to json\nwindow.setState = element => {\n  project.statekeys = element.checked;\n  if (input.value) input.oninput();\n}\n\n// Function to add a new key-value pair to the state\nwindow.addKey = () => {\n  const key = document.getElementById('newKey').value;\n  const value = document.getElementById('newValue').value === 'true';\n  const buttonClass = \"text-xs w-auto px-3 py-1 m-0 mx-1 capitalize rounded-md\";\n  const stateKeysHtml = `\n    <div class=\"grid grid-cols-3 justify-between gap-2 items-center m-0 px-2 py-4 border-0 border-b border-solid border-gray-800\" data-theme=\"border\">\n      <span>${key}</span>\n      <div>\n        <input type=\"checkbox\" ${value ? 'checked' : ''} role=\"switch\" onchange=\"updateState('${key}', this.checked)\">\n      </div>\n      <button class=\"${buttonClass} bg-transparent text-red-600 border-red-600\" onclick=\"removeKey('${key}')\">Remove</button>\n    </div>\n  `;\n  \n  if (key) {\n    project.states[key] = value;\n    document.getElementById('stateKeys').innerHTML += stateKeysHtml;\n    if (input.value) input.oninput();\n    newKey.value = '';\n  }\n}\n\n// Function to update a state value\nwindow.updateState = (key, value) => {\n  if (key in project.states) {\n    project.states[key] = value;\n    if (input.value) input.oninput();\n  }\n}\n\n// Function to remove a key from the state\nwindow.removeKey = key => {\n  delete project.states[key];\n  Settings.render('[data-panel=settings]'); // Re-render to update the UI\n  if (input.value) input.oninput();\n}\nwindow.handleEnterKey = event => {\n  if (event.key === 'Enter') {\n    addKey();\n  }\n}\n\n// converts html to json\nwindow.html2json = input => {\n  function generateId() {\n    let id = '';\n    while (!/^[a-zA-Z]/.test(id)) {\n      id = Math.random().toString(36).substr(2, 9);\n    }\n    return id;\n  }\n  function elementToJson(element) {\n    const boxElements = [\n      'article',\n      'aside',\n      'div',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'hgroup',\n      'label',\n      'main',\n      'nav',\n      'ol',\n      'section',\n      'ul'\n    ];\n    const textElements = [\n      'a',\n      'abbr',\n      'b',\n      'blockquote',\n      'button',\n      'cite',\n      'del',\n      'em',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'i',\n      'ins',\n      'kbd',\n      'mark',\n      'p',\n      'small',\n      'span',\n      'strike',\n      'strong',\n      'summary',\n      'sub',\n      'sup',\n      'u'\n    ];\n    const obj = {\n      tag: element.tagName.toLowerCase()\n    };\n\n    if (project.statekeys) {\n      const tagName = element.tagName.toLowerCase();\n      if (boxElements.includes(tagName)) {\n        obj.type = \"box\";\n        obj.name = \"box\";\n      } else if (textElements.includes(tagName)) {\n        obj.type = \"text\";\n        obj.name = \"text\";\n      } else {\n        obj.type = tagName;\n        obj.name = tagName;\n      }\n      obj.id = generateId();\n      obj.styles = generateId();\n      obj.states = project.states;\n    }\n  \n    // Collect attributes\n    const props = {};\n    const events = {};\n    Array.from(element.attributes).forEach(attr => {\n      if (attr.name.startsWith('on')) {\n        events[attr.name] = attr.value;\n      } else {\n        props[attr.name] = attr.value;\n      }\n    });\n  \n    // Add props only if not empty\n    if (Object.keys(props).length > 0) {\n      obj.props = props;\n    }\n  \n    // Add events only if not empty\n    if (Object.keys(events).length > 0) {\n      obj.events = events;\n    }\n  \n    if (element.childNodes.length > 0) {\n      obj.children = [];\n      element.childNodes.forEach(child => {\n        if (child.nodeType === Node.ELEMENT_NODE) {\n          obj.children.push(elementToJson(child));\n        } else if (child.nodeType === Node.TEXT_NODE && child.nodeValue.trim()) {\n          obj.text = child.nodeValue.trim();\n        }\n      });\n    }\n  \n    return obj;\n  }\n\n  project.html = input;\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(input, 'text/html');\n  \n  // Process both head and body elements\n  const headJson = Array.from(doc.head.children).map(child => elementToJson(child));\n  const bodyJson = Array.from(doc.body.children).map(child => elementToJson(child));\n\n  // Combine the head and body JSON structures into one array\n  json = [...headJson, ...bodyJson];\n\n  project.json = JSON.stringify(json, null, 2);\n  return project.json;\n}\n\n// converts json to html\nwindow.json2html = input => {\n  const selfClosingTags = [\n    'br',\n    'hr',\n    'input',\n    'img',\n    'option'\n  ]\n  function jsonToElement(json) {\n    function escapeHtml(text) {\n      const map = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#039;'\n      };\n      return text.replace(/[&<>\"']/g, function(m) { return map[m]; });\n    }\n    const renderElement = element => {\n      let html = '';\n      \n      if (!element.tag) {\n        html += element.text || '';\n        return html;\n      }\n    \n      html += `<${element.tag}`;\n        \n      if (element.props) {\n        for (const [key, value] of Object.entries(element.props)) {\n          html += ` ${key}=\"${value}\"`;\n        }\n      }\n    \n      if (selfClosingTags.includes(element.tag)) {\n        html += '/>';\n      } else {\n        html += '>';\n      }\n    \n      if (element.text) {\n        html += escapeHtml(element.text);\n      }\n    \n      if (element.children) {\n        for (const childElement of element.children) {\n          html += renderElement(childElement);\n        }\n      }\n    \n      if (!selfClosingTags.includes(element.tag)) {\n        html += `</${element.tag}>`;\n      }\n      return html;\n    }\n  \n    let html = '';\n    if (Array.isArray(json)) {\n      json.forEach(element => {\n        html += renderElement(element);\n      });\n    }\n    return html;\n  }\n  function beautifyHtml(json) {\n    const html = jsonToElement(json);\n    let tab = '  ';\n    let result = '';\n    let indent = '';\n  \n    html.split(/>\\s*</).forEach(function(element) {\n      if (element.match(/^\\/\\w/)) {\n        indent = indent.substring(tab.length);\n      }\n  \n      result += indent + '<' + element.trim() + '>\\r\\n';\n  \n      if (element.match(/^<?\\w[^>]*[^\\/]$/) && !element.startsWith(\"<input\")) {\n        indent += tab;\n      }\n    });\n  \n    // Remove leading tab and newline, and trim trailing newline and whitespace\n    return result.substring(1, result.length - 3).trim();\n  }\n\n  project.json = JSON.parse(input);\n  project.html = beautifyHtml(project.json);\n  project.json = JSON.stringify(project.json, null, 2);\n  return project.html;\n}\n\n// new project\nwindow.newProject = () => {\n  // Ask user for confirmation\n  Modal.render({\n    title: \"Are you sure you want to start a new project?\",\n    content: `<div class=\"p-4 text-center\">All current data will be lost.</div>`,\n    onConfirm: function() {\n      project = {\n        statekeys: true,\n        html: ``,\n        json: ``,\n        dark: true\n      };\n\n      input.value = project.html;\n      output.value = project.json;\n      const settingsBtn = document.getElementById('settingsBtn');\n      if (settingsBtn.classList.contains('text-blue-500')) settingsBtn.onclick();\n    }\n  });\n}\n\n// import project file\nwindow.importProject = () => {\n  // Ask user for confirmation\n  Modal.render({\n    title: \"Are you sure you want to load a new project?\",\n    content: `<div class=\"p-4 text-center\">All current data will be lost.</div>`,\n    onConfirm: function() {\n      // Create an input element of type file\n      const fileInput = document.createElement('input');\n      fileInput.type = 'file';\n      fileInput.accept = '.json'; // Accept only .json files\n    \n      // Add event listener for file selection\n      fileInput.addEventListener('change', (event) => {\n        const file = event.target.files[0];\n        \n        if (!file) {\n          console.error('No file selected.');\n          return;\n        }\n    \n        const reader = new FileReader();\n    \n        // Define what happens once file is loaded\n        reader.onload = function(event) {\n          try {\n            const importedData = JSON.parse(event.target.result);\n            \n            // Replace project data with imported JSON data\n            project = {...project, ...importedData};\n\n            // set theme\n            document.documentElement.setAttribute('data-theme', project.dark);\n      \n            input.value = project.html;\n            output.value = project.json;\n\n            const settingsBtn = document.getElementById('settingsBtn');\n            if (settingsBtn.classList.contains('text-blue-500')) settingsBtn.onclick();\n    \n            console.log('Project imported successfully:', importedData);\n          } catch (error) {\n            console.error('Error parsing JSON file:', error);\n          }\n        };\n    \n        // Read the file as text\n        reader.readAsText(file);\n        fileInput.remove();\n      });\n    \n      // Click the input element to trigger file selection dialog\n      fileInput.click();\n    }\n  });\n}\n\n// download\nwindow.download = string => {\n  // Ask user for confirmation\n  Modal.render({\n    title: \"Project File Name\",\n    content: `<input id=\"fileName\" type=\"text\" value=\"output\" placeholder=\"Project file name....\">`,\n    onLoad: function() {\n      const fileNameInput = document.getElementById('fileName');\n      fileNameInput.focus();\n      fileNameInput.select();\n    \n      const confirmBtn = fileNameInput.closest('dialog').querySelector('footer button:last-child');\n\n      fileNameInput.onkeydown = event => {\n        if (event.key === 'Enter') {\n          event.preventDefault(); // Prevent the default form submission\n          confirmBtn.click(); // Trigger the confirm button click\n        }\n      };\n    },\n    onConfirm: function() {\n      const fileName = document.getElementById('fileName').value.trim().toLowerCase();\n      const html = document.getElementById('input').value;\n      const json = document.getElementById('output').value;\n      \n      if (!fileName) {\n        return Modal.render({\n          title: \"Error\",\n          content: `<div class=\"text-center\">File name not found!</div>`\n        });\n      }\n  \n      let fileContent, extension, blob;\n      if (string) {\n        if (string === 'html') {\n          fileContent = html;\n          extension = 'html';\n          blob = new Blob([fileContent], { type: \"text/html;charset=utf-8\" });\n        }\n        if (string === 'json') {\n          fileContent = json;\n          extension = 'json';\n          blob = new Blob([fileContent], { type: \"application/json;charset=utf-8\" });\n        }\n      } else {\n        fileContent = JSON.stringify(project, null, 2);\n        extension = 'json';\n        blob = new Blob([fileContent], {type: \"application/json;charset=utf-8\"});\n      }\n      saveAs(blob, `${fileName}${string ? `` : `_html2json`}.${extension}`);\n    }\n  });\n}\n\n// other functions for app\nwindow.theme = () => {\n  const sun = \"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z\";\n  const moon = \"M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z\";\n  \n  // Toggle dark mode\n  project.dark = !project.dark;\n\n  // update icon based upon theme\n  data.themeIcon = project.dark ? moon : sun;\n\n  // Set data-theme attribute on <html> element\n  document.documentElement.setAttribute('data-theme', project.dark ? 'dark' : 'light');\n\n  // update elements to new theme\n  document.getElementById('themeIcon').setAttribute('d', data.themeIcon);\n  document.querySelectorAll('[data-theme]').forEach(element => {\n    if (element.tagName.toLowerCase() === 'html') return;\n    let item = element.getAttribute('data-theme');\n    \n    switch (item) {\n      case 'border':\n        element.classList.toggle(\"border-gray-800\", project.dark);\n        element.classList.toggle(\"border-gray-200\", !project.dark);\n        break;\n      // Add more cases for other attributes if needed\n      default:\n        break;\n    }\n  });\n}\nwindow.togglePanel = (panel, button) => {\n  data.activePanel = data.activePanel === panel ? null : panel;\n  \n  const panelElements = document.querySelectorAll(`[data-panel]`);\n  if (data.activePanel) {\n    panelElements.forEach(element => element.classList.add('hidden'));\n    document.querySelector(`[data-panel=${panel}]`).classList.remove('hidden');\n    button.classList.add('text-blue-500');\n    button.style = \"\";\n  } else {\n    panelElements.forEach(element => element.classList.add('hidden'));\n    document.querySelector(`[data-panel=code]`).classList.remove('hidden');\n    button.classList.remove('text-blue-500');\n    button.style = \"color: unset;\";\n  }\n}\n\n// once dom has loaded init functions\ndocument.addEventListener('DOMContentLoaded', function() {\n  // Initialize and render components\n  MenuBar.render('[data-menubar]');\n  Settings.render('[data-panel=settings]');\n  const input = document.getElementById('input');\n  const output = document.getElementById('output');\n  input.oninput = () => {\n    output.value = html2json(input.value);\n    localStorage.setItem('html2json', JSON.stringify(project));\n  }\n  output.oninput = () => {\n    input.value = json2html(output.value);\n    localStorage.setItem('html2json', JSON.stringify(project));\n  }\n\n  if (localStorage.getItem('html2json')) {\n    project = JSON.parse(localStorage.getItem('html2json'));\n  }\n\n  input.value = project.html;\n  output.value = project.json;\n});",
  "logo": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmlld0JveD0iMCAwIDIyMy45OTk3OSAyMzEuOTk5OTQiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzIiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIHdpZHRoPSIyMjMuOTk5NzkiCiAgIGhlaWdodD0iMjMxLjk5OTk0IgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzCiAgICAgaWQ9ImRlZnMyIiAvPjxnCiAgICAgaWQ9ImcxIgogICAgIHRyYW5zZm9ybT0ibWF0cml4KDE0LjExNDI0NiwwLDAsMTQuMTE0MjQ2LDIyNC45MTU0MiwyMjUuMzg1NCkiPjxwYXRoCiAgICAgICBzdHJva2U9IiNmNWE5N2YiCiAgICAgICBkPSJtIC0xNC41MDAxMTEsLTE0LjUgaCAxMy4wMDAwMDA0IGwgLTEuNSwxMS41IC01LDIgLTUuMDAwMDAwNCwtMiB6IgogICAgICAgaWQ9InBhdGgxIgogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2Y1YTk3ZjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW9wYWNpdHk6MSIgLz48ZwogICAgICAgaWQ9Imc1IgogICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC40OTkyNzM4MywwLDAsMC40OTkyNzM4MywtMTEuOTk0MzAxLC0xMi40ODIwMzcpIgogICAgICAgc3R5bGU9InN0cm9rZTojY2FkM2Y1O3N0cm9rZS1vcGFjaXR5OjEiPjxwYXRoCiAgICAgICAgIHN0cm9rZT0iI2NhZDNmNSIKICAgICAgICAgZD0ibSA1LjA1NDIzMDksMS41IGMgMCwwIC0xLjQ3NTI3NTEsLTAuMDA4MjIgLTIuMjkxNzAwNSwxLjA1MTYgLTAuODE2NDI1NCwxLjA1OTgyMTQgMC40NjEwNzU0LDQuMjQyOCAtMC45NDMzNjIsNS40MjQwNTgxIC0wLjI4Mjg1NTYsMC4yMzc5MDcgLTEuMTA4ODExNiwwIC0xLjEwODgxMTYsMCAwLDAgMC44MjYxMzgxLC0wLjIzODEyMzQgMS4xMDg4MTE2LDAgMS40MTU5OTc1LDEuMTkyODMzIDAuMDQ3MzAzLDQuNDI3ODE2OSAwLjk0MzM2Miw1LjQ3MzY3OTkgMC44OTYwNTg3LDEuMDQ1ODYyIDIuMjkxNzAwNSwxLjA1MTEyNSAyLjI5MTcwMDUsMS4wNTExMjUiCiAgICAgICAgIGlkPSJwYXRoMi0zLTUiCiAgICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNjYWQzZjU7c3Ryb2tlLXdpZHRoOjEuNjIwNjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46YmV2ZWw7c3Ryb2tlLW9wYWNpdHk6MSIgLz48cGF0aAogICAgICAgICBzdHJva2U9IiNjYWQzZjUiCiAgICAgICAgIGQ9Im0gMTAuOTQ1NzY5LDEuNSBjIDAsMCAxLjQ3NTI3NSwtMC4wMDgyMiAyLjI5MTcwMSwxLjA1MTYgMC44MTY0MjUsMS4wNTk4MjE0IC0wLjQ2MTA3Niw0LjI0MjggMC45NDMzNjIsNS40MjQwNTgxIDAuMjgyODU1LDAuMjM3OTA3IDEuMTA4ODExLDAgMS4xMDg4MTEsMCAwLDAgLTAuODI2MTM4LC0wLjIzODEyMzQgLTEuMTA4ODExLDAgLTEuNDE1OTk4LDEuMTkyODMzIC0wLjA0NzMsNC40Mjc4MTY5IC0wLjk0MzM2Miw1LjQ3MzY3OTkgLTAuODk2MDU5LDEuMDQ1ODYyIC0yLjI5MTcwMSwxLjA1MTEyNSAtMi4yOTE3MDEsMS4wNTExMjUiCiAgICAgICAgIGlkPSJwYXRoNSIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2NhZDNmNTtzdHJva2Utd2lkdGg6MS42MjA2MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpiZXZlbDtzdHJva2Utb3BhY2l0eToxIiAvPjwvZz48L2c+PC9zdmc+Cg==",
  "console": false,
  "dark": true,
  "previewDark": true,
  "module": true,
  "autorun": true,
  "pwa": false,
  "preview": true,
  "activePanel": "javascript",
  "columns": false,
  "columnsRight": true
}